(function(g){g("body").append('<div id="zoom"><a class="close"></a><a href="#previous" class="previous"></a><a href="#next" class="next"></a><div class="content loading"></div></div>');var p=g("#zoom").hide(),j=g("#zoom .content"),f='<div class="overlay"></div>',b=false,l=null,d=g(window).width(),a=g(window).height(),c=g("html[dir~='rtl']").length;function i(t){if(t){t.preventDefault()}var s=g(this),v=s.attr("href");if(!v){return}var u=g(new Image()).hide();g("#zoom .previous, #zoom .next").show();if(s.hasClass("zoom")){g("#zoom .previous, #zoom .next").hide()}if(!b){b=true;p.show();g("body").addClass("zoomed")}j.html(u).delay(500).addClass("loading");j.prepend(f);u.load(r).attr("src",v);l=s;function r(){var z=g(this),w=parseInt(j.css("borderLeftWidth")),y=d-(w*2),B=a-(w*2),C=z.width(),A=z.height();if(C==j.width()&&C<=y&&A==j.height()&&A<=B){E(z);return}if(C>y||A>B){var x=B<A?B:A,D=y<C?y:C;if(x/A<=D/C){z.width(Math.round(C*x/A));z.height(x)}else{z.width(D);z.height(Math.round(A*D/C))}}j.animate({width:z.width(),height:z.height(),marginTop:-(z.height()/2)-w,marginLeft:-(z.width()/2)-w},200,function(){E(z)});function E(F){F.show();j.removeClass("loading")}}}function e(){var r=l.parents("div.gallery-wrap").prev();if(r.length==0){r=g(".gallery div.gallery-wrap:last-child")}r.find("a").trigger("click")}function q(){var r=l.parents("div.gallery-wrap").next();if(r.length==0){r=g(".gallery div.gallery-wrap:first-child")}r.find("a").trigger("click")}function o(r){if(r){r.preventDefault()}b=false;l=null;p.hide();g("body").removeClass("zoomed");j.empty()}function h(){d=g(window).width();a=g(window).height()}(function k(){p.on("click",function(r){r.preventDefault();if(g(r.target).attr("id")=="zoom"){o()}});g("#zoom .close").on("click",o);g("#zoom .previous").on("click",e);g("#zoom .next").on("click",q);g(document).keydown(function(r){if(!l){return}if(r.which==38||r.which==40){r.preventDefault()}if(r.which==27){o()}if(c){if(r.which==39&&!l.hasClass("zoom")){e()}if(r.which==37&&!l.hasClass("zoom")){q()}}else{if(r.which==37&&!l.hasClass("zoom")){e()}if(r.which==39&&!l.hasClass("zoom")){q()}}});if(g(".gallery a").length==1){g(".gallery a")[0].addClass("zoom")}g(".zoom, .gallery a").on("click",i)})();(function m(){g(window).on("resize",h)})();(function n(){g(window).on("mousewheel DOMMouseScroll",function(r){if(!l){return}r.stopPropagation();r.preventDefault();r.cancelBubble=false})})()})(jQuery);