(function(e){function a(a){function h(){function h(e){e.show();n.removeClass("loading")}var t=e(this),r=parseInt(n.css("borderLeftWidth")),i=o-r*2,s=u-r*2,a=t.width(),f=t.height();if(a==n.width()&&a<=i&&f==n.height()&&f<=s){h(t);return}if(a>i||f>s){var l=s<f?s:f,c=i<a?i:a;if(l/f<=c/a){t.width(Math.round(a*l/f));t.height(l)}else{t.width(c);t.height(Math.round(f*c/a))}}n.animate({width:t.width(),height:t.height(),marginTop:-(t.height()/2)-r,marginLeft:-(t.width()/2)-r},200,function(){h(t)})}if(a){a.preventDefault()}var f=e(this),l=f.attr("href");if(!l){return}var c=e(new Image).hide();e("#zoom .previous, #zoom .next").show();if(f.hasClass("zoom")){e("#zoom .previous, #zoom .next").hide()}if(!i){i=true;t.show();e("body").addClass("zoomed")}n.html(c).delay(500).addClass("loading");n.prepend(r);c.load(h).attr("src",l);s=f}function f(){var t=s.parent("div").prev();if(t.length==0){t=e(".gallery div:last-child")}t.find("a").trigger("click")}function l(){var t=s.parent("div").next();if(t.length==0){t=e(".gallery div:first-child")}t.children("a").trigger("click")}function c(r){if(r){r.preventDefault()}i=false;s=null;t.hide();e("body").removeClass("zoomed");n.empty()}function h(){o=e(window).width();u=e(window).height()}e("body").append('<div id="zoom"><a class="close"></a><a href="#previous" class="previous"></a><a href="#next" class="next"></a><div class="content loading"></div></div>');var t=e("#zoom").hide(),n=e("#zoom .content"),r='<div class="overlay"></div>',i=false,s=null,o=e(window).width(),u=e(window).height();(function(){t.on("click",function(t){t.preventDefault();if(e(t.target).attr("id")=="zoom"){c()}});e("#zoom .close").on("click",c);e("#zoom .previous").on("click",f);e("#zoom .next").on("click",l);e(document).keydown(function(e){if(!s){return}if(e.which==38||e.which==40){e.preventDefault()}if(e.which==27){c()}if(e.which==37&&!s.hasClass("zoom")){f()}if(e.which==39&&!s.hasClass("zoom")){l()}});if(e(".gallery a").length==1){e(".gallery a")[0].addClass("zoom")}e(".zoom, .gallery a").on("click",a)})();(function(){e(window).on("resize",h)})();(function(){e(window).on("mousewheel DOMMouseScroll",function(e){if(!s){return}e.stopPropagation();e.preventDefault();e.cancelBubble=false})})()})(jQuery);
